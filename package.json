{
  "name": "llma",
  "displayName": "NJUST_AI_Assistant",
  "description": "AI Code Assistant with Chat, File Creation, Inline Prediction, and Compilation.",
  "version": "0.4.1",
  "publisher": "JunjieChen",
  "icon": "./NJUST.png",
  "engines": {
    "vscode": "^1.108.0"
  },
  "categories": [
    "Machine Learning",
    "Programming Languages",
    "Other"
  ],
  "main": "./dist/extension.js",
  "activationEvents": [
    "onStartupFinished"
  ],
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "llma-sidebar",
          "title": "LLMA",
          "icon": "./NJUST.svg"
        }
      ]
    },
    "views": {
      "llma-sidebar": [
        {
          "icon": "",
          "type": "webview",
          "id": "llma.chatView",
          "name": "AI 聊天助手"
        }
      ]
    },
    "configuration": {
      "title": "LLMA 配置",
      "properties": {
        "llma.enableAutoCompletion": {
          "type": "boolean",
          "default": true,
          "description": "启用实时代码预测 (Ghost Text/幽灵文本)"
        },
        "llma.currentModel": {
          "type": "string",
          "default": "deepseek",
          "enum": [
            "deepseek",
            "qwen",
            "douban",
            "zhipu",
            "local",
            "huggingface"
          ],
          "description": "选择 AI 模型提供商"
        },
        "llma.localModel.enabled": {
          "type": "boolean",
          "default": false,
          "description": "启用本地大模型"
        },
        "llma.localModel.baseUrl": {
          "type": "string",
          "default": "http://localhost:11434/v1",
          "description": "本地模型 API 基础 URL (例如 Ollama: http://localhost:11434/v1)"
        },
        "llma.localModel.modelName": {
          "type": "string",
          "default": "llama3",
          "description": "本地模型名称 (例如: llama3, qwen2, codellama)"
        },
        "llma.localModel.timeout": {
          "type": "number",
          "default": 120000,
          "description": "本地模型请求超时时间 (毫秒)"
        },
        "llma.requestDelay": {
          "type": "number",
          "default": 300,
          "description": "自动预测延迟 (毫秒)"
        },
        "llma.maxTokens": {
          "type": "number",
          "default": 2000,
          "description": "生成的最大 Token 数"
        },
        "llma.deepseekApiKey": {
          "type": "string",
          "default": "",
          "description": "DeepSeek API Key"
        },
        "llma.qwenApiKey": {
          "type": "string",
          "default": "",
          "description": "通义千问 API Key"
        },
        "llma.qwenBaseUrl": {
          "type": "string",
          "default": "https://dashscope.aliyuncs.com/compatible-mode/v1",
          "description": "通义千问 Base URL"
        },
        "llma.doubanApiKey": {
          "type": "string",
          "default": "",
          "description": "豆包 API Key"
        },
        "llma.doubanModel": {
          "type": "string",
          "default": "",
          "description": "豆包 Endpoint ID (例如: ep-20240604...)"
        },
        "llma.zhipuApiKey": {
          "type": "string",
          "default": "",
          "description": "智普AI API Key"
        },
        "llma.huggingfaceApiKey": {
          "type": "string",
          "default": "",
          "description": "Hugging Face Access Token (HF_TOKEN)"
        },
        "llma.huggingfaceModel": {
          "type": "string",
          "default": "Qwen/Qwen2.5-Coder-32B-Instruct",
          "description": "Hugging Face 模型 ID (例如: Qwen/Qwen2.5-Coder-32B-Instruct)"
        },
        "llma.compilation.compilers": {
          "type": "object",
          "default": {
            "c": "gcc \"{file}\" -o \"{executable}\"",
            "cpp": "g++ \"{file}\" -o \"{executable}\"",
            "python": "python -m py_compile \"{file}\"",
            "javascript": "node --check \"{file}\"",
            "typescript": "tsc --noEmit \"{file}\"",
            "java": "javac -d \"{outputDir}\" \"{file}\"",
            "rust": "rustc \"{file}\" -o \"{executable}\"",
            "go": "go build -o \"{executable}\" \"{file}\"",
            "cangjie": "cjc \"{file}\" -o \"{executable}\""
          },
          "description": "编译命令配置（支持 {file}、{executable}、{outputDir}、{fileName}、{fileNameWithoutExt}、{fileDir} 占位符）"
        },
        "llma.compilation.defaultOutputDir": {
          "type": "string",
          "default": "build",
          "description": "默认输出目录"
        },
        "llma.python.interpreterPath": {
          "type": "string",
          "default": "",
          "description": "Python 解释器路径（留空则自动检测）"
        },
        "llma.python.autoDetectVirtualEnv": {
          "type": "boolean",
          "default": true,
          "description": "自动检测并激活虚拟环境"
        },
        "llma.python.preferredCommand": {
          "type": "string",
          "default": "auto",
          "enum": [
            "auto",
            "python",
            "python3",
            "py"
          ],
          "description": "首选 Python 命令（auto 表示自动检测）"
        },
        "llma.python.versionCheck": {
          "type": "boolean",
          "default": true,
          "description": "运行前检查 Python 版本"
        },
        "llma.enableWebSearch": {
          "type": "boolean",
          "default": false,
          "description": "启用联网搜索功能"
        },
        "llma.webSearchEngine": {
          "type": "string",
          "default": "google",
          "enum": [
            "google",
            "bing",
            "baidu",
            "yahoo",
            "duckduckgo"
          ],
          "description": "选择 SerpAPI 使用的底层搜索引擎"
        },
        "llma.serpApiKey": {
          "type": "string",
          "default": "",
          "description": "SerpApi API Key (用于联网搜索)"
        }
      }
    },
    "commands": [
      {
        "command": "llma.aiCodeComplete",
        "title": "LLMA: 生成完整代码 (Prompt/Context)",
        "icon": "$(sparkle)"
      },
      {
        "command": "llma.toggle",
        "title": "LLMA: 切换自动预测开关",
        "icon": "$(hubot)"
      },
      {
        "command": "llma.trigger",
        "title": "LLMA: 手动触发 Ghost Text"
      },
      {
        "command": "llma.compileCurrentFile",
        "title": "LLMA: 编译当前文件",
        "icon": "$(play)"
      },
      {
        "command": "llma.compileWithOptions",
        "title": "LLMA: 编译文件（高级选项）",
        "icon": "$(gear)"
      }
    ],
    "keybindings": [
      {
        "command": "llma.aiCodeComplete",
        "key": "ctrl+shift+a",
        "mac": "cmd+shift+a",
        "when": "editorTextFocus",
        "description": "根据注释或选中代码生成完整代码"
      },
      {
        "command": "llma.trigger",
        "key": "alt+\\",
        "when": "editorTextFocus"
      },
      {
        "command": "llma.compileCurrentFile",
        "key": "ctrl+shift+b",
        "mac": "cmd+shift+b",
        "when": "editorTextFocus",
        "description": "编译当前文件"
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "npm run check-types && npm run lint && npm run build",
    "build": "node esbuild.js && npm run copy-files",
    "copy-files": "copyfiles -f src/webview.html dist/ && echo 'Files copied'",
    "watch": "npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:copy": "nodemon --watch src/webview.html --exec 'npm run copy-files'",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "package": "npm run check-types && npm run lint && npm run build --production",
    "check-types": "tsc --noEmit",
    "lint": "eslint src",
    "test": "vscode-test"
  },
  "devDependencies": {
    "@types/node": "20.x",
    "@types/vscode": "^1.108.1",
    "@typescript-eslint/eslint-plugin": "^8.54.0",
    "@typescript-eslint/parser": "^8.54.0",
    "@vscode/test-cli": "^0.0.4",
    "@vscode/test-electron": "^2.3.9",
    "copyfiles": "^2.4.1",
    "esbuild": "^0.20.1",
    "eslint": "^8.56.0",
    "nodemon": "^3.1.11",
    "npm-run-all": "^4.1.5",
    "typescript": "^5.9.3",
    "typescript-eslint": "^8.54.0"
  },
  "dependencies": {
    "axios": "^1.13.4",
    "http-proxy-agent": "^7.0.2",
    "https-proxy-agent": "^7.0.6"
  }
}